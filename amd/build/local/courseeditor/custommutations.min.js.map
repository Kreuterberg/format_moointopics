{"version":3,"file":"custommutations.min.js","sources":["../../../src/local/courseeditor/custommutations.js"],"sourcesContent":["import ajax from 'core/ajax';\nexport default class {\n    async sectionSetChapter(stateManager, target) {\n        const course = stateManager.get('course');\n        let ids = [];\n        const targetSection = stateManager.state.section.get(target.dataset.id);\n        stateManager.state.section.forEach(section => {\n            if (section.number >= targetSection.number) {\n                ids.push(section.id);\n            }\n        });\n        const args = {\n            action: 'section_setChapter',\n            courseid: course.id,\n            ids: ids,\n            targetsectionid: target.dataset.id,\n        };\n        let updates = await ajax.call([{\n            methodname: 'core_courseformat_update_course',\n            args,\n        }])[0];\n        stateManager.processUpdates(JSON.parse(updates));\n    }\n    async sectionUnsetChapter(stateManager, target) {\n        const course = stateManager.get('course');\n        let ids = [];\n        const targetSection = stateManager.state.section.get(target.dataset.id);\n        stateManager.state.section.forEach(section => {\n            if (section.number >= targetSection.number) {\n                ids.push(section.id);\n            }\n        });\n        const args = {\n            action: 'section_unsetChapter',\n            courseid: course.id,\n            ids: ids,\n            targetsectionid: target.dataset.id,\n        };\n        let updates = await ajax.call([{\n            methodname: 'core_courseformat_update_course',\n            args,\n        }])[0];\n        stateManager.processUpdates(JSON.parse(updates));\n    }\n}"],"names":["stateManager","target","course","get","ids","targetSection","state","section","dataset","id","forEach","number","push","args","action","courseid","targetsectionid","updates","ajax","call","methodname","processUpdates","JSON","parse"],"mappings":"mTAE4BA,aAAcC,cAC5BC,OAASF,aAAaG,IAAI,cAC5BC,IAAM,SACJC,cAAgBL,aAAaM,MAAMC,QAAQJ,IAAIF,OAAOO,QAAQC,IACpET,aAAaM,MAAMC,QAAQG,SAAQH,UAC3BA,QAAQI,QAAUN,cAAcM,QAChCP,IAAIQ,KAAKL,QAAQE,aAGnBI,KAAO,CACTC,OAAQ,qBACRC,SAAUb,OAAOO,GACjBL,IAAKA,IACLY,gBAAiBf,OAAOO,QAAQC,QAEhCQ,cAAgBC,cAAKC,KAAK,CAAC,CAC3BC,WAAY,kCACZP,KAAAA,QACA,GACJb,aAAaqB,eAAeC,KAAKC,MAAMN,oCAEjBjB,aAAcC,cAC9BC,OAASF,aAAaG,IAAI,cAC5BC,IAAM,SACJC,cAAgBL,aAAaM,MAAMC,QAAQJ,IAAIF,OAAOO,QAAQC,IACpET,aAAaM,MAAMC,QAAQG,SAAQH,UAC3BA,QAAQI,QAAUN,cAAcM,QAChCP,IAAIQ,KAAKL,QAAQE,aAGnBI,KAAO,CACTC,OAAQ,uBACRC,SAAUb,OAAOO,GACjBL,IAAKA,IACLY,gBAAiBf,OAAOO,QAAQC,QAEhCQ,cAAgBC,cAAKC,KAAK,CAAC,CAC3BC,WAAY,kCACZP,KAAAA,QACA,GACJb,aAAaqB,eAAeC,KAAKC,MAAMN"}