define("format_moointopics/modalGenerator",["exports","core/modal_factory","core/url","format_moointopics/mooin4Modal","core/str"],(function(_exports,_modal_factory,_url,_mooin4Modal,_str){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modal_factory=_interopRequireDefault(_modal_factory),_url=_interopRequireDefault(_url),_mooin4Modal=_interopRequireDefault(_mooin4Modal);_exports.init=()=>{window.addEventListener("message",(function(event){var message=event.data;"showModal"===message.action&&(!async function(data){if(data.show_chapter_modal){document.querySelector('[data-key="'.concat(data.chapter_id,'"]')).classList.add("completed");var footerContent="";footerContent=data.next_chapter<0?'<button type="button" class="mooin4-btn mooin4-btn-special"data-action="hide">'+await(0,_str.get_string)("close","format_moointopics")+'<i class="bi bi-x-circle-fill"></i></button>':'<button type="button" class="mooin4-btn mooin4-btn-special"data-action="hide">'+await(0,_str.get_string)("close","format_moointopics")+'<i class="bi bi-x-circle-fill"></i></button><a href="'+_url.default.relativeUrl("/course/view.php",{id:data.course_id,section:data.next_chapter})+'" class="mooin4-btn mooin4-btn-primary">'+await(0,_str.get_string)("next_chapter","format_moointopics")+"</a>";(await _modal_factory.default.create({title:await(0,_str.get_string)("modal_chapter_complete_title","format_moointopics"),body:"<p>"+await(0,_str.get_string)("modal_chapter_complete","format_moointopics")+'</p><i class="bi bi-check-circle"></i>',footer:footerContent,type:_mooin4Modal.default.TYPE,scrollable:!1})).show()}if(data.show_course_modal){document.querySelector('[data-key="'.concat(data.chapter_id,'"]')).classList.add("completed");(await _modal_factory.default.create({title:await(0,_str.get_string)("modal_course_complete_title","format_moointopics"),body:"<p>"+await(0,_str.get_string)("modal_course_complete","format_moointopics")+'</p><i class="bi bi-mortarboard-fill"></i>',footer:'<button type="button" class="mooin4-btn mooin4-btn-primary"data-action="hide">'+await(0,_str.get_string)("close","format_moointopics")+'<i class="bi bi-x-circle-fill"></i></button>',type:_mooin4Modal.default.TYPE,scrollable:!1})).show()}}(message.modal.data),this.window.console.log(message.modal))}))}}));

//# sourceMappingURL=modalGenerator.min.js.map