{"version":3,"file":"modalGenerator.min.js","sources":["../src/modalGenerator.js"],"sourcesContent":["import ModalFactory from \"core/modal_factory\";\nimport Url from \"core/url\";\nimport Mooin4Modal from \"format_moointopics/mooin4Modal\";\nimport { get_string as getString } from \"core/str\";\n\n/**\n *\n */\nexport const init = () => {\n  window.addEventListener('message', function(event) {\n    var message = event.data;\n    if (message.action === 'showModal') {\n      showModal(message.modal.data);\n      this.window.console.log(message.modal);\n    }\n  });\n};\n\n/**\n * Data from ajax request\n * @param {*} data\n */\n async function showModal(data) {\n  if (data.show_chapter_modal) {\n    let navdrawerChapter = document.querySelector(\n      `[data-key=\"${data.chapter_id}\"]`\n    );\n    navdrawerChapter.classList.add(\"completed\");\n    var footerContent = \"\";\n    if (data.next_chapter < 0) {\n       footerContent =\n        '<button type=\"button\" class=\"mooin4-btn mooin4-btn-special\"' +\n        'data-action=\"hide\">' + await getString(\"close\", \"format_moointopics\") + '<i class=\"bi bi-x-circle-fill\"></i></button>';\n    } else {\n      footerContent =\n        '<button type=\"button\" class=\"mooin4-btn mooin4-btn-special\"' +\n        'data-action=\"hide\">' + await getString(\"close\", \"format_moointopics\") + '<i class=\"bi bi-x-circle-fill\"></i></button>' +\n        '<a href=\"' +\n        Url.relativeUrl(\"/course/view.php\", {\n          id: data.course_id,\n          section: data.next_chapter,\n        }) +\n        '\" class=\"mooin4-btn mooin4-btn-primary\">' + await getString(\"next_chapter\", \"format_moointopics\") + '</a>';\n    }\n      const modal = await ModalFactory.create({\n      title: await getString(\"modal_chapter_complete_title\", \"format_moointopics\"),\n      body: '<p>' + await getString(\"modal_chapter_complete\", \"format_moointopics\") + '</p><i class=\"bi bi-check-circle\"></i>',\n      footer: footerContent,\n      type: Mooin4Modal.TYPE,\n      scrollable: false,\n    });\n    modal.show();\n  }\n  if (data.show_course_modal) {\n    let navdrawerChapter = document.querySelector(\n      `[data-key=\"${data.chapter_id}\"]`\n    );\n    navdrawerChapter.classList.add(\"completed\");\n      const modal = await ModalFactory.create({\n      title: await getString(\"modal_course_complete_title\", \"format_moointopics\"),\n      body: '<p>' + await getString(\"modal_course_complete\", \"format_moointopics\") + '</p><i class=\"bi bi-mortarboard-fill\"></i>',\n      footer:\n        '<button type=\"button\" class=\"mooin4-btn mooin4-btn-primary\"' +\n        'data-action=\"hide\">' + await getString(\"close\", \"format_moointopics\") + '<i class=\"bi bi-x-circle-fill\"></i></button>',\n      type: Mooin4Modal.TYPE,\n      scrollable: false,\n    });\n    modal.show();\n  }\n}"],"names":["window","addEventListener","event","message","data","action","show_chapter_modal","document","querySelector","chapter_id","classList","add","footerContent","next_chapter","Url","relativeUrl","id","course_id","section","ModalFactory","create","title","body","footer","type","Mooin4Modal","TYPE","scrollable","show","show_course_modal","showModal","modal","console","log"],"mappings":"ofAQoB,KAClBA,OAAOC,iBAAiB,WAAW,SAASC,WACtCC,QAAUD,MAAME,KACG,cAAnBD,QAAQE,yBAWUD,SACpBA,KAAKE,mBAAoB,CACJC,SAASC,mCAChBJ,KAAKK,kBAEJC,UAAUC,IAAI,iBAC3BC,cAAgB,GAEjBA,cADCR,KAAKS,aAAe,EAEpB,uFAC8B,mBAAU,QAAS,sBAAwB,+CAGzE,uFAC8B,mBAAU,QAAS,sBADjD,wDAGAC,aAAIC,YAAY,mBAAoB,CAClCC,GAAIZ,KAAKa,UACTC,QAASd,KAAKS,eAEhB,iDAAmD,mBAAU,eAAgB,sBAAwB,cAEnFM,uBAAaC,OAAO,CACxCC,YAAa,mBAAU,+BAAgC,sBACvDC,KAAM,YAAc,mBAAU,yBAA0B,sBAAwB,yCAChFC,OAAQX,cACRY,KAAMC,qBAAYC,KAClBC,YAAY,KAERC,UAEJxB,KAAKyB,kBAAmB,CACHtB,SAASC,mCAChBJ,KAAKK,kBAEJC,UAAUC,IAAI,oBACTQ,uBAAaC,OAAO,CACxCC,YAAa,mBAAU,8BAA+B,sBACtDC,KAAM,YAAc,mBAAU,wBAAyB,sBAAwB,6CAC/EC,OACE,uFAC8B,mBAAU,QAAS,sBAAwB,+CAC3EC,KAAMC,qBAAYC,KAClBC,YAAY,KAERC,QAvDJE,CAAU3B,QAAQ4B,MAAM3B,WACnBJ,OAAOgC,QAAQC,IAAI9B,QAAQ4B"}